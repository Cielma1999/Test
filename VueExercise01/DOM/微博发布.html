<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <textarea name="" id="" cols="90" rows="10" placeholder="说点什么...."></textarea>
        <span class="useCount">0</span>/<span>200</span>
        <button id="send">发布</button>
    </div>
    <div class="contentList">
        <ul id="list"></ul>
        
    </div>
   
    <script>
        let textarea = document.querySelector('textarea');
        let useCount = document.querySelector('.useCount');
        textarea.addEventListener('input',function(){
            useCount.innerHTML = this.value.length;
        });

        //输入不能为空
        let button = document.querySelector('#send');
        button.addEventListener('click',function(){
            if(textarea.value.trim() ===''){ //trim()取消首尾空格
                textarea.value = ''; //重置文本框
                useCount.innerHTML = 0;  //重置数字计算
                return alert('内容不能为空');
            }else{
                let list = document.querySelector('#list');
                let li  = document.createElement('li');
                li.innerHTML = `
                <div class="info">
                    <span class="username">Ciel</span>
                    <p class="send-time">${new Date().toLocaleString()}</p>
                </div>
                <div class="content">${textarea.value}</div>
                <span class="del">X</span>
                `;

                //删除留言
                let del = li.querySelector('.del');
                del.addEventListener('click',function(){
                    list.removeChild(li);
                });

                list.insertBefore(li,list.children[0]);
                textarea.value = ''; //重置文本框
                useCount.innerHTML = 0;  //重置数字计算
            }


        });

       //回车发布信息
        textarea.addEventListener('keyup',function(e){  //此处只能用keyup,keydown会导致多一个空行且字数统计为1
           // console.log(e.keyCode);//已经不常用了
           if(e.key==='Enter'){
                button.click(); //按下Enter触发点击发布
           } 
        
        });
           

    </script>
</body>
</html>